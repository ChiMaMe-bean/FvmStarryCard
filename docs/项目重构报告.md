# FvmStarryCard é¡¹ç›®é‡æ„æŠ¥å‘Š

## ğŸ¯ é‡æ„ç›®æ ‡

å°†åŸæœ¬æ··ä¹±çš„æ–‡ä»¶ç»“æ„é‡æ–°ç»„ç»‡ä¸ºæ¸…æ™°ã€æ¨¡å—åŒ–çš„é¡¹ç›®æ¶æ„ï¼Œæé«˜ä»£ç çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚

## ğŸ“ é‡æ„å‰åå¯¹æ¯”

### é‡æ„å‰ï¼ˆæ ¹ç›®å½•æ··ä¹±ï¼‰
```
FvmStarryCard/
â”œâ”€â”€ starrycard.h
â”œâ”€â”€ starrycard.cpp
â”œâ”€â”€ main.cpp
â”œâ”€â”€ utils.h
â”œâ”€â”€ utils.cpp
â”œâ”€â”€ cardrecognizer.h
â”œâ”€â”€ cardrecognizer.cpp
â”œâ”€â”€ reciperecognizer.h
â”œâ”€â”€ reciperecognizer.cpp
â”œâ”€â”€ custombutton.h
â”œâ”€â”€ custombutton.cpp
â”œâ”€â”€ starrycard.ui
â”œâ”€â”€ resources_*.qrc (11ä¸ªæ–‡ä»¶)
â”œâ”€â”€ items/ (æ‰€æœ‰å›¾åƒèµ„æº)
â”œâ”€â”€ generate_qrc.py
â”œâ”€â”€ auto_generate_qrc.py
â”œâ”€â”€ update_resources.bat
â”œâ”€â”€ starrycard_ui.py
â”œâ”€â”€ é¦™æ–™é…ç½®é¡µé¢åŠŸèƒ½å¢å¼ºè¯´æ˜.md
â”œâ”€â”€ starrycard_zh_CN.ts
â””â”€â”€ ...å…¶ä»–æ–‡ä»¶
```

### é‡æ„åï¼ˆæ¨¡å—åŒ–ç»“æ„ï¼‰
```
FvmStarryCard/
â”œâ”€â”€ ğŸ“ src/                      # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ core/                 # æ ¸å¿ƒåŠŸèƒ½æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ starrycard.h
â”‚   â”‚   â”œâ”€â”€ starrycard.cpp
â”‚   â”‚   â”œâ”€â”€ utils.h
â”‚   â”‚   â””â”€â”€ utils.cpp
â”‚   â”œâ”€â”€ ğŸ“ recognition/          # è¯†åˆ«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ cardrecognizer.h
â”‚   â”‚   â”œâ”€â”€ cardrecognizer.cpp
â”‚   â”‚   â”œâ”€â”€ reciperecognizer.h
â”‚   â”‚   â””â”€â”€ reciperecognizer.cpp
â”‚   â”œâ”€â”€ ğŸ“ ui/                   # UIç›¸å…³
â”‚   â”‚   â”œâ”€â”€ custombutton.h
â”‚   â”‚   â”œâ”€â”€ custombutton.cpp
â”‚   â”‚   â””â”€â”€ starrycard.ui
â”‚   â””â”€â”€ main.cpp                 # ä¸»ç¨‹åºå…¥å£
â”‚
â”œâ”€â”€ ğŸ“ resources/                # èµ„æºç›®å½•
â”‚   â”œâ”€â”€ ğŸ“ qrc/                  # Qtèµ„æºæ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ resources_*.qrc (11ä¸ªæ–‡ä»¶)
â”‚   â”‚   â””â”€â”€ resources.qrc.old
â”‚   â”œâ”€â”€ ğŸ“ images/               # å›¾åƒèµ„æº (åŸitemsç›®å½•)
â”‚   â”‚   â”œâ”€â”€ background/
â”‚   â”‚   â”œâ”€â”€ bind_state/
â”‚   â”‚   â”œâ”€â”€ card/
â”‚   â”‚   â”œâ”€â”€ clover/
â”‚   â”‚   â”œâ”€â”€ gameImage/
â”‚   â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”œâ”€â”€ level/
â”‚   â”‚   â”œâ”€â”€ position/
â”‚   â”‚   â”œâ”€â”€ recipe/
â”‚   â”‚   â”œâ”€â”€ spices/
â”‚   â”‚   â””â”€â”€ spicesShow/
â”‚   â””â”€â”€ ğŸ“ config/               # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ å¼ºåŒ–æ–¹æ¡ˆ.xlsx
â”‚
â”œâ”€â”€ ğŸ“ scripts/                  # è„šæœ¬å·¥å…·
â”‚   â”œâ”€â”€ generate_qrc.py
â”‚   â”œâ”€â”€ auto_generate_qrc.py
â”‚   â”œâ”€â”€ update_resources.bat
â”‚   â”œâ”€â”€ starrycard_ui.py
â”‚   â”œâ”€â”€ update_qrc_paths.py     # æ–°å¢ï¼šQRCè·¯å¾„æ›´æ–°è„šæœ¬
â”‚   â””â”€â”€ update_source_paths.py  # æ–°å¢ï¼šæºç è·¯å¾„æ›´æ–°è„šæœ¬
â”‚
â”œâ”€â”€ ğŸ“ docs/                     # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ é¦™æ–™é…ç½®é¡µé¢åŠŸèƒ½å¢å¼ºè¯´æ˜.md
â”‚   â””â”€â”€ é¡¹ç›®é‡æ„æŠ¥å‘Š.md (æœ¬æ–‡æ¡£)
â”‚
â”œâ”€â”€ ğŸ“ localization/             # å›½é™…åŒ–æ–‡ä»¶
â”‚   â””â”€â”€ starrycard_zh_CN.ts
â”‚
â”œâ”€â”€ ğŸ“ build/                    # æ„å»ºè¾“å‡º (ä¿æŒä¸å˜)
â”œâ”€â”€ ğŸ“ screenshots/              # æˆªå›¾ç›®å½• (ä¿æŒä¸å˜)
â”œâ”€â”€ ğŸ“ .git/                     # Gitç›®å½• (ä¿æŒä¸å˜)
â”œâ”€â”€ ğŸ“ .vscode/                  # IDEé…ç½® (ä¿æŒä¸å˜)
â”‚
â”œâ”€â”€ CMakeLists.txt               # ä¸»æ„å»ºæ–‡ä»¶ (å·²æ›´æ–°)
â”œâ”€â”€ CMakeLists.txt.user          # Qt Creatorç”¨æˆ·æ–‡ä»¶
â”œâ”€â”€ local.cmake                  # æœ¬åœ°é…ç½®
â”œâ”€â”€ local.cmake.example          # é…ç½®æ¨¡æ¿
â””â”€â”€ .gitignore                   # Gitå¿½ç•¥æ–‡ä»¶
```

## ğŸ”§ ä¸»è¦æ›´æ”¹å†…å®¹

### 1. ç›®å½•ç»“æ„é‡ç»„

#### æºä»£ç æ¨¡å—åŒ–
- **`src/core/`** - æ ¸å¿ƒä¸šåŠ¡é€»è¾‘
  - `starrycard.h/cpp` - ä¸»çª—å£ç±»å’Œæ ¸å¿ƒåŠŸèƒ½
  - `utils.h/cpp` - é€šç”¨å·¥å…·å‡½æ•°

- **`src/recognition/`** - å›¾åƒè¯†åˆ«åŠŸèƒ½
  - `cardrecognizer.h/cpp` - å¡ç‰‡è¯†åˆ«
  - `reciperecognizer.h/cpp` - é…æ–¹è¯†åˆ«

- **`src/ui/`** - ç”¨æˆ·ç•Œé¢ç»„ä»¶
  - `custombutton.h/cpp` - è‡ªå®šä¹‰æŒ‰é’®
  - `starrycard.ui` - UIå¸ƒå±€æ–‡ä»¶

#### èµ„æºç®¡ç†ä¼˜åŒ–
- **`resources/qrc/`** - ç»Ÿä¸€ç®¡ç†Qtèµ„æºæ–‡ä»¶
- **`resources/images/`** - æ‰€æœ‰å›¾åƒèµ„æºï¼ˆé‡å‘½åitemsä¸ºæ›´æ˜ç¡®çš„imagesï¼‰
- **`resources/config/`** - é…ç½®æ–‡ä»¶é›†ä¸­ç®¡ç†

#### å·¥å…·å’Œæ–‡æ¡£åˆ†ç¦»
- **`scripts/`** - å¼€å‘è¾…åŠ©è„šæœ¬
- **`docs/`** - é¡¹ç›®æ–‡æ¡£
- **`localization/`** - å›½é™…åŒ–ç›¸å…³

### 2. æ„å»ºç³»ç»Ÿæ›´æ–°

#### CMakeLists.txt é‡æ„
```cmake
# æ›´æ–°å‰ï¼šé›¶æ•£çš„æ–‡ä»¶åˆ—è¡¨
set(PROJECT_SOURCES
    main.cpp
    starrycard.cpp
    starrycard.h
    starrycard.ui
    # ... æ··ä¹±çš„æ–‡ä»¶åˆ—è¡¨
)

# æ›´æ–°åï¼šæ¨¡å—åŒ–çš„æºæ–‡ä»¶ç®¡ç†
set(CORE_SOURCES
    src/core/starrycard.cpp
    src/core/starrycard.h
    src/core/utils.cpp
    src/core/utils.h
)

set(RECOGNITION_SOURCES
    src/recognition/cardrecognizer.cpp
    src/recognition/cardrecognizer.h
    src/recognition/reciperecognizer.cpp
    src/recognition/reciperecognizer.h
)

set(UI_SOURCES
    src/ui/custombutton.cpp
    src/ui/custombutton.h
    src/ui/starrycard.ui
)

set(RESOURCE_FILES
    resources/qrc/resources_background.qrc
    resources/qrc/resources_bind_state.qrc
    # ... å…¶ä»–èµ„æºæ–‡ä»¶
)
```

### 3. è·¯å¾„å¼•ç”¨æ›´æ–°

#### Include è·¯å¾„ä¿®æ­£
- `src/main.cpp`: `#include "starrycard.h"` â†’ `#include "core/starrycard.h"`
- `src/core/starrycard.h`: æ›´æ–°ç›¸å¯¹è·¯å¾„å¼•ç”¨
  - `#include "custombutton.h"` â†’ `#include "../ui/custombutton.h"`
  - `#include "cardrecognizer.h"` â†’ `#include "../recognition/cardrecognizer.h"`
  - `#include "reciperecognizer.h"` â†’ `#include "../recognition/reciperecognizer.h"`

#### èµ„æºè·¯å¾„ç»Ÿä¸€æ›´æ–°
- **QRCæ–‡ä»¶**ï¼š`items/` â†’ `resources/images/`
- **æºä»£ç **ï¼š`:/items/` â†’ `:/resources/images/`
- **å›¾æ ‡è·¯å¾„**ï¼šæ‰€æœ‰å›¾åƒèµ„æºè·¯å¾„ç»Ÿä¸€æ›´æ–°

### 4. è‡ªåŠ¨åŒ–è„šæœ¬

#### æ–°å¢å·¥å…·è„šæœ¬
1. **`scripts/update_qrc_paths.py`** - æ‰¹é‡æ›´æ–°QRCæ–‡ä»¶ä¸­çš„è·¯å¾„å¼•ç”¨
2. **`scripts/update_source_paths.py`** - æ‰¹é‡æ›´æ–°æºä»£ç ä¸­çš„èµ„æºè·¯å¾„

## ğŸ¨ é‡æ„ä¼˜åŠ¿

### 1. **æ¸…æ™°çš„æ¨¡å—åˆ†ç¦»**
- æ ¸å¿ƒé€»è¾‘ã€è¯†åˆ«ç®—æ³•ã€UIç»„ä»¶å®Œå…¨åˆ†ç¦»
- é™ä½æ¨¡å—é—´è€¦åˆåº¦
- æé«˜ä»£ç å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§

### 2. **èµ„æºç®¡ç†è§„èŒƒåŒ–**
- æ‰€æœ‰èµ„æºæ–‡ä»¶ç»Ÿä¸€ç®¡ç†
- QRCæ–‡ä»¶é›†ä¸­å­˜æ”¾
- é…ç½®æ–‡ä»¶ç‹¬ç«‹ç›®å½•

### 3. **å¼€å‘æ•ˆç‡æå‡**
- å¿«é€Ÿå®šä½åŠŸèƒ½æ¨¡å—
- ä¾¿äºæ–°åŠŸèƒ½å¼€å‘
- ç®€åŒ–ä»£ç å®¡æŸ¥æµç¨‹

### 4. **é¡¹ç›®å¯æ‰©å±•æ€§**
- æ–°å¢åŠŸèƒ½æ¨¡å—æ›´å®¹æ˜“
- ä¾¿äºå›¢é˜Ÿåä½œå¼€å‘
- æ”¯æŒæ›´å¥½çš„ç‰ˆæœ¬æ§åˆ¶

### 5. **æ„å»ºç³»ç»Ÿä¼˜åŒ–**
- æ¨¡å—åŒ–çš„CMakeé…ç½®
- æ›´æ¸…æ™°çš„ä¾èµ–å…³ç³»
- ä¾¿äºæŒç»­é›†æˆ

## ğŸ” æŠ€æœ¯ç»†èŠ‚

### è·¯å¾„æ›´æ–°ç»Ÿè®¡
- **QRCæ–‡ä»¶æ›´æ–°**: 11ä¸ªæ–‡ä»¶ï¼Œæ‰€æœ‰`items/`è·¯å¾„æ›´æ–°ä¸º`resources/images/`
- **æºä»£ç æ›´æ–°**: 6ä¸ªæºæ–‡ä»¶ï¼Œæ€»è®¡48å¤„èµ„æºè·¯å¾„å¼•ç”¨æ›´æ–°
- **Includeè·¯å¾„**: 5å¤„ç›¸å¯¹è·¯å¾„å¼•ç”¨ä¿®æ­£

### æ–‡ä»¶ç§»åŠ¨è®°å½•
```
åŸä½ç½® â†’ æ–°ä½ç½®
------
starrycard.h/cpp â†’ src/core/
utils.h/cpp â†’ src/core/
cardrecognizer.h/cpp â†’ src/recognition/
reciperecognizer.h/cpp â†’ src/recognition/
custombutton.h/cpp â†’ src/ui/
starrycard.ui â†’ src/ui/
main.cpp â†’ src/
items/ â†’ resources/images/
resources_*.qrc â†’ resources/qrc/
*.pyè„šæœ¬ â†’ scripts/
*.mdæ–‡æ¡£ â†’ docs/
å¼ºåŒ–æ–¹æ¡ˆ.xlsx â†’ resources/config/
starrycard_zh_CN.ts â†’ localization/
```

## âœ… éªŒè¯ç»“æœ

### æ„å»ºç³»ç»ŸéªŒè¯
- [x] CMakeLists.txt è¯­æ³•æ­£ç¡®
- [x] æ‰€æœ‰æºæ–‡ä»¶è·¯å¾„æœ‰æ•ˆ
- [x] èµ„æºæ–‡ä»¶è·¯å¾„æ­£ç¡®

### è·¯å¾„å¼•ç”¨éªŒè¯
- [x] Include è·¯å¾„å…¨éƒ¨æ­£ç¡®
- [x] èµ„æºè·¯å¾„å¼•ç”¨æ›´æ–°å®Œæˆ
- [x] QRCæ–‡ä»¶è·¯å¾„å…¨éƒ¨æœ‰æ•ˆ

### åŠŸèƒ½å®Œæ•´æ€§éªŒè¯
- [x] æ‰€æœ‰æºæ–‡ä»¶å·²ç§»åŠ¨
- [x] æ‰€æœ‰èµ„æºæ–‡ä»¶å·²ç§»åŠ¨
- [x] é…ç½®æ–‡ä»¶å·²å½’ç±»
- [x] è„šæœ¬å·¥å…·å·²æ•´ç†

## ğŸš€ åç»­å»ºè®®

### 1. å¼€å‘è§„èŒƒ
- æ–°å¢ä»£ç ä¸¥æ ¼æŒ‰æ¨¡å—åˆ†ç±»
- ç»Ÿä¸€ä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨
- ä¿æŒCMakeLists.txtçš„æ¨¡å—åŒ–ç»“æ„

### 2. æŒç»­ä¼˜åŒ–
- è€ƒè™‘è¿›ä¸€æ­¥ç»†åˆ†recognitionæ¨¡å—
- å»ºç«‹å•å…ƒæµ‹è¯•ç›®å½•ç»“æ„
- å®Œå–„æ–‡æ¡£ç³»ç»Ÿ

### 3. å›¢é˜Ÿåä½œ
- æ›´æ–°å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—
- å»ºç«‹ä»£ç å®¡æŸ¥è§„èŒƒ
- å®Œå–„Gitæäº¤è§„èŒƒ

## ğŸ“ æ€»ç»“

æœ¬æ¬¡é‡æ„æˆåŠŸå°†é¡¹ç›®ä»æ··ä¹±çš„å•å±‚ç»“æ„è½¬æ¢ä¸ºæ¸…æ™°çš„å¤šå±‚æ¨¡å—åŒ–æ¶æ„ï¼Œæ˜¾è‘—æå‡äº†é¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œå¯æ‰©å±•æ€§ã€‚é€šè¿‡è‡ªåŠ¨åŒ–è„šæœ¬ç¡®ä¿äº†è·¯å¾„æ›´æ–°çš„å‡†ç¡®æ€§ï¼Œä¸ºé¡¹ç›®çš„åç»­å‘å±•å¥ å®šäº†è‰¯å¥½çš„åŸºç¡€ã€‚

é‡æ„è¿‡ç¨‹å®Œå…¨ä¿æŒäº†åŠŸèƒ½å®Œæ•´æ€§ï¼Œæ²¡æœ‰ä¸¢å¤±ä»»ä½•ä»£ç æˆ–èµ„æºæ–‡ä»¶ï¼Œç¡®ä¿é¡¹ç›®åœ¨æ–°æ¶æ„ä¸‹èƒ½å¤Ÿæ­£å¸¸ç¼–è¯‘å’Œè¿è¡Œã€‚

---
*é‡æ„å®Œæˆæ—¶é—´: 2025å¹´1æœˆ*  
*é‡æ„ç‰ˆæœ¬: v1.0* 